<UserControl x:Class="SignalGeneratorApp.Views.SignalHistoryView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:viewmodels="clr-namespace:SignalGeneratorApp.ViewModels" 
             xmlns:views="clr-namespace:SignalGeneratorApp.Views"
             d:DataContext="{d:DesignInstance Type=views:SignalHistoryView}"
             mc:Ignorable="d"
             d:DesignHeight="300" d:DesignWidth="800">
    <Border Background="White" BorderBrush="#E0E0E0" BorderThickness="1">
        <StackPanel>
            <TextBlock Text="История сохранённых сигналов"
                       FontWeight="Bold"
                       Margin="10,5,10,10"/>

            <DataGrid ItemsSource="{Binding SavedSignals}"
                      Style="{StaticResource HistoryDataGridStyle}"
                      AutoGenerateColumns="False"
                      CanUserAddRows="False"
                      SelectionMode="Single"
                      SelectedItem="{Binding SelectedSignal, Mode=TwoWay}"
                      Height="200"
                      Margin="10,0,10,10">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Название" Binding="{Binding DisplayName}" Width="*"/>
                    <DataGridTextColumn Header="Амплитуда" Binding="{Binding Amplitude}" Width="100"/>
                    <DataGridTextColumn Header="Частота" Binding="{Binding Frequency}" Width="100"/>
                    <DataGridTextColumn Header="Точек" Binding="{Binding PointCount}" Width="80"/>
                    <DataGridTextColumn Header="Дата создания"
                                        Binding="{Binding CreatedAt, StringFormat='dd.MM.yyyy HH:mm'}"
                                        Width="150"/>
                    <DataGridTemplateColumn Header="Действия" Width="100">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <Button Command="{Binding DataContext.LoadSelectedSignalCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                            CommandParameter="{Binding}"
                                            Background="#28A745"
                                            Foreground="White"
                                            Width="40" Height="40"
                                            ToolTip="Загрузить">
                                        <Path Data="M19,9V4H5V9H3V4C3,2.89 3.9,2 5,2H19C20.1,2 21,2.89 21,4V9H19M13,13V20H11V13H8L12,9L16,13H13Z"
                                              Fill="White" Stretch="Uniform"/>
                                    </Button>
                                    <Button Command="{Binding DataContext.DeleteSelectedSignalCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                            CommandParameter="{Binding}"
                                            Background="#FF4D4D"
                                            Foreground="White"
                                            Width="40" Height="40"
                                            ToolTip="Удалить" Margin="5,0,0,0">
                                        <Path Data="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"
                                              Fill="White" Stretch="Uniform"/>
                                    </Button>
                                </StackPanel>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                </DataGrid.Columns>
            </DataGrid>
        </StackPanel>
    </Border>
</UserControl>